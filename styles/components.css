.note{background:#f8fbff;border:1px solid var(--border);padding:12px 14px;border-radius:12px;margin:16px 0;color:var(--muted)}
.legend{display:flex;gap:16px;align-items:center;font-size:14px}
.swatch{width:10px;height:10px;border-radius:2px;display:inline-block;margin-right:6px}

details.day{border:1px solid var(--border);background:var(--card);border-radius:14px;margin:14px 0;overflow:hidden}
details.day > summary{
  list-style:none;cursor:pointer;padding:12px 16px;display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center
}
details.day > summary::-webkit-details-marker{display:none}
.summary-title{display:flex;gap:10px;align-items:baseline}
.summary-title h2{margin:0;font-size:18px}
.menu{position:fixed;left:0;top:72px;width:var(--sidebar-width);display:flex;flex-direction:column;gap:8px;padding:12px;border-right:1px solid var(--border);background:rgba(255,255,255,.8);backdrop-filter:saturate(140%) blur(6px)}
.menu a{color:var(--ink);text-decoration:none;border:1px solid var(--border);padding:8px 10px;border-radius:10px;font-size:14px;background:#fff}
.menu a:hover{color:var(--accent);border-color:#bfd1ff;background:#f8fbff}
.meta{font-size:13px;color:var(--muted);display:flex;gap:14px;align-items:center}
.barbox{display:flex;align-items:center;gap:10px}
.barbox .bar{
  width:min(42vw,360px);height:8px;background:#0e1320;border:1px solid #182036;border-radius:999px;overflow:hidden
}
.barbox .bar > i{display:block;height:100%;background:var(--ok);width:0%}
.min{font-variant-numeric:tabular-nums}
.content{padding:0 16px 16px}
.segments{margin:0;padding-left:18px}
.segments li{margin:2px 0}
.segments li span.km{color:var(--muted)}
.segments li.active{background:#fffbe6;border-radius:6px}
.footer-line{margin-top:10px;color:var(--muted);font-size:13px}

/* anchor for sticky header spacing */
.anchor{display:block;height:0;visibility:hidden;scroll-margin-top:72px}

/* map */
.map-wrap{margin-top:12px}
.map-toolbar{display:flex;gap:8px;margin:8px 0}
.map{width:100%;height:360px;border:1px solid var(--border);border-radius:12px;overflow:hidden}
.map.loading{display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:14px}

/* static map image */
.mapimg-wrap{margin-top:12px}
.mapimg-viewport{position:relative;width:100%;height:360px;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fff}
.mapimg{width:100%;height:100%;object-fit:contain;display:block}
.mapimg-viewport .pin{position:absolute;transform:translate(-50%,-100%);left:calc(var(--x) * 1%);top:calc(var(--y) * 1%);pointer-events:auto}
.mapimg-viewport .pin .dot{width:10px;height:10px;background:var(--accent);border:2px solid #fff;border-radius:999px;box-shadow:0 1px 2px rgba(0,0,0,.25);display:block;margin-bottom:4px}
.mapimg-viewport .pin .label{background:#ffffffcc;color:#111;padding:2px 6px;border-radius:6px;border:1px solid var(--border);font-size:12px;white-space:nowrap}
.mapimg-viewport .pin.highlight .dot{background:var(--ok)}
.mapimg-viewport .loading{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:14px;background:linear-gradient(180deg,#fafcff 0%,#f6f8fb 100%)}

/* tags */
.tag{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid var(--border);vertical-align:middle;margin-left:8px}
.tag--primary{background:rgba(34,197,94,.12);color:#047857;border-color:#a7f3d0}
.tag--secondary{background:rgba(59,130,246,.12);color:#1d4ed8;border-color:#bfdbfe}
